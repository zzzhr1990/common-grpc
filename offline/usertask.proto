syntax = "proto3";

package services;

//import "service_one/messages.proto";
option go_package = "github.com/zzzhr1990/common-grpc/go/services/offline/usertask";
// import "offline/systemtask.proto";


service OfflineUserTaskService {
    rpc create (UserOfflineTask) returns (UserOfflineTask) {}
    rpc add (AddUserOfflineTaskRequest) returns (UserOfflineTaskResponse) {}
    //rpc tryCreate (OfflineDownload) returns (OfflineDownload) {}
    //rpc batchCreate (CloudStoreList) returns (CloudStoreList) {}
    rpc get (UserOfflineTask) returns (UserOfflineTask) {}
    //rpc change (CloudStore) returns (CloudStore) {}
    //rpc batchGet (CloudStoreList) returns (CloudStoreList) {}
    //rpc batchGetByHash (StringListEntity) returns (CloudStoreList) {}
    //rpc getOrEmpty (CloudStore) returns (CloudStore) {}
    //rpc getInnerDownloadAddress (StringEntity) returns (StringEntity) {}
}


message AddUserOfflineTaskRequest {
    string url = 1;
    int64 user = 2;
    string password = 3;
    string path = 4;
}

message UserOfflineTask {
    string identity = 1;
    int64 user = 2;
    int64 createTime = 3;
    string name = 4;
    int32 type = 5;
    int32  status = 6;
    int64 size = 7;
    int64 downloadSize = 8;
    int32 progress = 9;
    string cip = 10;
    string data = 11;
}

message UserOfflineTaskFile {
    string name = 1;
    int64 size = 2;
    int32 order = 3;
}

message UserOfflineTaskResponse {
    string identity = 1;
    UserOfflineTaskFile info = 2;
    bool success = 3;
    string name = 4;
    bool neewPassword = 5;
    //bool success = 6;
    string code = 6;
    string message = 7;
    bool parsed = 8;
    repeated UserOfflineTaskFile files = 9;
}

message UserTaskListener {
    string taskIdentity = 1;
    int64 user = 3;
    int64 createTime = 4;
    int64 deadline = 5;
    //int32 status = 6;
    //string path = 7;
}

